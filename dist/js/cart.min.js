"use strict";$(function(){var n=$("#productTab tbody"),i=$(".no-goods"),d=$(".go-back"),l=$(".delivery-tit"),o=$(".cart-settlement");$(".go-back input").click(function(){location.href="index.html"});var t=window.localStorage,e=g(t.carts?t.carts:""),s=0,c=0;for(var a in e){var r=JSON.parse(e[a]);for(var p in r){var h=r[p];n.append(' <tr id="'.concat(h.gdsubname).concat(p,'" class="goods-show">\n            <td>\n                <input type="checkbox">\n            </td>\n            <td>\n                <dl>\n                    <dt>\n                        <img src="').concat(h.gdimg,'" alt="">\n                    </dt>\n                    <dd>\n                        <p>\n                            <a href="#">').concat(h.gdname,"</a><br>\n                            <span>").concat(h.gdsubname,'</span><br>\n                            <span class="').concat(p,'">规格：').concat(h.gdspec,"</span>\n                        </p>\n                    </dd>\n                </dl>\n            </td>\n            <td>\n                <b>\n                    <i>￥</i>\n                    ").concat(h.gdprice,'.00\n                </b>\n            </td>\n            <td>\n                <div class="goods-num">\n                    <input type="button" value="-" class="num-minus">\n                    <input type="text" value="').concat(h.gdnum,'" class="goods-number">\n                    <input type="button" value="+" class="num-plus">\n                </div>\n            </td>\n            <td class="price-sum">\n                <b>\n                    <i>￥</i>\n                    <span>').concat(h.gdprice*h.gdnum,'.00</span>\n                </b>\n            </td>\n            <td>\n                <a href="javascript:;" class="goods-del">删除</a>\n            </td>\n        </tr> ')),s+=h.gdnum,c+=h.gdnum*h.gdprice}}0==$(".goods-show").length?(i.css("display","block"),d.css("display","block"),o.css("display","none"),l.css("display","none")):(i.css("display","none"),d.css("display","none"),o.css("display","block"),l.css("display","table-row"));var u=$(".cart-settlement p span"),m=$(".cart-settlement p em");function g(n){return n?JSON.parse(n):{}}u.html(s),m.html(c.toFixed(2)),$(".goods-num .num-minus").each(function(){$(this).click(function(){var n=$(this).parent().parent().prev().prev().children().children("dd").children().children(":eq(0)").html(),t=$(this).parent().parent().prev().prev().children().children("dd").children().children(":eq(4)").attr("class"),e=window.localStorage,s=g(e.carts?e.carts:""),c=JSON.parse(s[n]);1<c[t].gdnum&&c[t].gdnum--,s[n]=JSON.stringify(c),e.carts=JSON.stringify(s),$(this).next().val(JSON.parse(s[n])[t].gdnum),$(this).parent().parent().next().children().children(":eq(1)").html(JSON.parse(s[n])[t].gdprice*JSON.parse(s[n])[t].gdnum+".00");var a=0,r=0;$(".goods-num .goods-number").each(function(){a+=parseInt($(this).val())}),$(".price-sum b span").each(function(){r+=parseInt($(this).html())}),u.html(a),m.html(r.toFixed(2))})}),$(".goods-num .num-plus").each(function(){$(this).click(function(){var n=$(this).parent().parent().prev().prev().children().children("dd").children().children(":eq(0)").html(),t=$(this).parent().parent().prev().prev().children().children("dd").children().children(":eq(4)").attr("class"),e=window.localStorage,s=g(e.carts?e.carts:""),c=JSON.parse(s[n]);c[t].gdnum<50&&c[t].gdnum++,s[n]=JSON.stringify(c),e.carts=JSON.stringify(s),$(this).prev().val(JSON.parse(s[n])[t].gdnum),$(this).parent().parent().next().children().children(":eq(1)").html(JSON.parse(s[n])[t].gdprice*JSON.parse(s[n])[t].gdnum+".00");var a=0,r=0;$(".goods-num .goods-number").each(function(){a+=parseInt($(this).val())}),$(".price-sum b span").each(function(){r+=parseInt($(this).html())}),u.html(a),m.html(r.toFixed(2))})}),$(".goods-del").each(function(){$(this).click(function(){var n=$(this).parent().prev().prev().prev().prev().children().children("dd").children().children(":eq(0)").html(),t=$(this).parent().prev().prev().prev().prev().children().children("dd").children().children(":eq(4)").attr("class"),e=window.localStorage,s=g(e.carts?e.carts:""),c=JSON.parse(s[n]);delete c[t],s[n]=JSON.stringify(c),e.carts=JSON.stringify(s),$(this).parent().parent().remove();var a=0,r=0;$(".goods-num .goods-number").each(function(){a+=parseInt($(this).val())}),$(".price-sum b span").each(function(){r+=parseInt($(this).html())}),u.html(a),m.html(r.toFixed(2)),0==$(".goods-show").length?(i.css("display","block"),d.css("display","block"),o.css("display","none"),l.css("display","none")):(i.css("display","none"),d.css("display","none"),o.css("display","block"),l.css("display","table-row"))})}),$(".continue-buy").click(function(){window.location="index.html"})});