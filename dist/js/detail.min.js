"use strict";$(function(){$(".goods-magnifier");var t=$(".goods-img"),s=$(".goods-slide"),a=$(".goods-slide img"),c=$(".goods-mask");t.mouseenter(function(){s.css("display","block"),c.css("display","block")}),c.mouseleave(function(){s.css("display","none"),c.css("display","none")}),c.mousemove(function(t){var i=t.pageX-s.outerWidth()/2-c.offset().left+c.position().left,n=t.pageY-s.outerHeight()/2-c.offset().top+c.position().top;i<=c.position().left?i=c.position().left:i>=c.innerWidth()-s.outerWidth()+c.position().left&&(i=c.innerWidth()-s.outerWidth()+c.position().left),n<=c.position().top?n=c.position().top:n>=c.innerHeight()-s.outerHeight()+c.position().top&&(n=c.innerHeight()-s.outerHeight()+c.position().top),s.css("left","".concat(i,"px")),s.css("top","".concat(n,"px"));var o=i/(c.innerWidth()-s.outerWidth()),e=n/(c.innerHeight()-s.outerHeight());a.css("left","".concat(-o*(a.outerWidth()-s.innerWidth()-76)-64,"px")),a.css("top","".concat(-e*(a.outerHeight()-s.innerHeight()-76)-64,"px"))}),$.extend({sport:function(e,s){clearInterval(e.timer),e.timer=setInterval(function(){var t=!0;for(var i in s){var n="opacity"===i?parseInt(100*parseFloat($.getStyle(e,i))):parseInt($.getStyle(e,i)),o=(s[i]-n)/4;o=0<o?Math.ceil(o):Math.floor(o),n!==s[i]&&(t=!1),"opacity"===i?(e.style.opacity=(n+o)/100,e.style.filter="alpha(opacity="+(n+o)+")"):e.style[i]=n+o+"px"}t&&clearInterval(e.timer)},30)},getStyle:function(t,i){return t.currentStyle?t.currentStyle[i]:getComputedStyle(t,1)[i]}}),$(".side-box").hover(function(){$.sport(this,{right:226})},function(){$.sport(this,{right:0})});var i=!0,n=$(".link-more1"),o=$(".buyInfor-a6 .more-con1");n.hover(function(){o.css("display","block")},function(){setTimeout(function(){i||o.css("display","none")},300)}),o.hover(function(){i=!0,$(this).css("display","block")},function(){i=!1,$(this).css("display","none")});var e=$(".buyInfor-a3 ul li");e.each(function(){$(this).click(function(){e.attr("class","specification-unselect"),$(this).attr("class","specification-select"),"specification-select"===e.first().attr("class")?$(".buyInfor-a2 span").html(298):$(".buyInfor-a2 span").html(428)})});var r=$(".buy-num span").first(),l=$(".buy-num span").last(),p=$(".buy-num input");r.click(function(){var t=p.val();1<t&&p.val(t-1)}),l.click(function(){var t=parseInt(p.val());t<50&&p.val(t+1)}),$(".goods-inCar").click(function(){var t,i=$(".specification-select").attr("data-gd-id"),n=$(".goods-slide img").attr("src"),o=$(".goods-introduction h2").html(),e=$(".good-introduction span").html(),s=$(".specification-select span").first().html(),a=$(".buyInfor-a2 span").html(),c=parseInt($(".buyInfor-a4 div input").val()),r=window.localStorage,l=function(t){return t?JSON.parse(t):{}}(r.carts?r.carts:"");o in l?(i in(t=JSON.parse(l[o]))?t[i].gdnum+=c:t[i]={gdimg:n,gdname:o,gdsubname:e,gdspec:s,gdprice:a,gdnum:c},l[o]=JSON.stringify(t)):((t={})[i]={gdimg:n,gdname:o,gdsubname:e,gdspec:s,gdprice:a,gdnum:c},l[o]=JSON.stringify(t));r.carts=JSON.stringify(l),$("body").append('<div class="mask"><div class="mask-con clear_fix"><span></span><p>商品已经加入购物车</p><input type="button" name="" id="" value="继续购物"><input type="button" name="" id="" value="去购物车结算"></div></div>'),$(".mask-con span").click(function(){$(".mask").remove()}),$(".mask-con input").first().click(function(){$(".mask").remove()}),$(".mask-con input").last().click(function(){$(".mask").remove(),location.href="cart.html"})})});